<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <title>Калькулятор темпа бега: VDOT, сплиты и питание на гонку</title>
  <meta name="description" id="meta-description" content="Калькулятор темпа бега онлайн: VDOT, 5 тренировочных зон, прогнозы на 5К-марафон, таблица сплитов и план питания. Калькулятор триатлона Sprint-Ironman бесплатно.">
  <meta name="keywords" content="калькулятор темпа бега, калькулятор бега онлайн, расчет темпа бега, калькулятор марафона, калькулятор полумарафона, VDOT калькулятор, калькулятор скорости бега, калькулятор сплитов бег, тренировочные зоны бег, прогноз времени на марафон, калькулятор триатлона, калькулятор Ironman, калькулятор Ironman 70.3, калькулятор питания на марафон, план питания триатлон, калькулятор негативного сплита, формула Джека Дэниелса бег, калькулятор бега 5 км, калькулятор бега 10 км, калькулятор углеводов марафон, сколько гелей на марафон">
  <meta name="author" content="Инна Рыжих">
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
  <meta name="googlebot" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">

  <meta property="og:title" id="meta-og-title" content="Калькулятор темпа бега: VDOT, зоны, сплиты, питание">
  <meta property="og:description" id="meta-og-description" content="VDOT, тренировочные зоны, прогнозы 5К-марафон, таблица сплитов, план питания на гонку. Калькулятор триатлона Sprint-Ironman.">
  <meta property="og:image" id="meta-og-image" content="https://innatri.com/assets/hero/og-image.png">
  <meta property="og:url" id="meta-og-url" content="https://innatri.com/calculator.html">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="InnaTri">
  <meta property="og:locale" content="ru_RU">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" id="meta-twitter-title" content="Калькулятор темпа бега: VDOT, зоны, сплиты, питание">
  <meta name="twitter:description" id="meta-twitter-description" content="VDOT, тренировочные зоны, прогнозы 5К-марафон, таблица сплитов, план питания на гонку. Калькулятор триатлона Sprint-Ironman.">
  <meta name="twitter:image" id="meta-twitter-image" content="https://innatri.com/assets/hero/og-image.png">

  <link rel="canonical" href="https://innatri.com/calculator.html">
  <link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="96x96">
  <link rel="icon" href="/assets/favicon.png?v=4" type="image/png" sizes="96x96">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#FF3B30">
  <link rel="alternate" hreflang="ru" href="https://innatri.com/calculator.html">
  <link rel="alternate" hreflang="en" href="https://innatri.com/en/calculator.html">
  <link rel="alternate" hreflang="x-default" href="https://innatri.com/calculator.html">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Manrope:wght@300;400;500;600&family=Unbounded:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","name":"InnaTri","url":"https://innatri.com","description":"Онлайн коучинг по триатлону и бегу.","inLanguage":"ru-RU","publisher":{"@type":"Person","name":"Инна Рыжих"}}</script>
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"WebApplication","name":"Калькулятор темпа бега и триатлона","url":"https://innatri.com/calculator.html","applicationCategory":"SportsApplication","operatingSystem":"All","browserRequirements":"Requires JavaScript","offers":{"@type":"Offer","price":"0","priceCurrency":"RUB"},"featureList":"VDOT, тренировочные зоны, прогноз на 8 дистанций, таблица сплитов, калькулятор питания, калькулятор триатлона","description":"Калькулятор темпа бега с VDOT, 5 тренировочными зонами по Дэниелсу, прогнозами на 8 дистанций, таблицей сплитов и планом питания на гонку."}</script>
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Главная","item":"https://innatri.com/"},{"@type":"ListItem","position":2,"name":"Калькулятор темпа бега","item":"https://innatri.com/calculator.html"}]}</script>
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"HowTo","name":"Как рассчитать темп бега и VDOT","step":[{"@type":"HowToStep","name":"Введите дистанцию и время","text":"Выберите дистанцию (5К, 10К, полумарафон, марафон или свою) и введите ваше финишное время."},{"@type":"HowToStep","name":"Получите VDOT и тренировочные зоны","text":"Калькулятор покажет ваш VDOT и 5 тренировочных зон: Easy, Марафон, Пороговый, Интервальный и Повторный."},{"@type":"HowToStep","name":"Посмотрите прогнозы и сплиты","text":"Увидите прогнозы времени на 8 дистанций и таблицу сплитов с выбором равномерного или негативного сплита."},{"@type":"HowToStep","name":"Рассчитайте питание на гонку","text":"Введите вес, интенсивность и температуру для расчёта углеводов, жидкости, натрия и кофеина."}]}</script>
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"FAQPage","mainEntity":[{"@type":"Question","name":"Как работает калькулятор триатлона?","acceptedAnswer":{"@type":"Answer","text":"Выбираете дистанцию (Sprint, Olympic, Ironman 70.3, Ironman) и вводите темп плавания, скорость велосипеда, темп бега и транзитки. Калькулятор показывает прогноз общего времени и разбивку по этапам."}},{"@type":"Question","name":"Как рассчитать темп на марафон по результату 5К?","acceptedAnswer":{"@type":"Answer","text":"Введите дистанцию 5 км и ваше время в разделе БЕГ. Калькулятор по формуле Ригеля покажет прогноз на марафон (42.2 км) и другие дистанции. Например, 5К за 25 минут — это примерно 3:52 на марафон."}},{"@type":"Question","name":"Что такое VDOT и какой показатель хороший?","acceptedAnswer":{"@type":"Answer","text":"VDOT — показатель беговой формы по методике Джека Дэниелса. Рассчитывается по результату на любой дистанции. VDOT 30-35 — начинающий бегун, 40-45 — средний уровень, 50-55 — продвинутый, 60+ — элитный."}},{"@type":"Question","name":"Что такое тренировочные зоны Дэниелса?","acceptedAnswer":{"@type":"Answer","text":"5 зон темпа для тренировок: Easy (лёгкий бег, 65-79% VO2max), Марафонский, Пороговый (лактатный порог), Интервальный (95-100% VO2max) и Повторный (быстрее VDOT-темпа). Каждая зона развивает разные качества."}},{"@type":"Question","name":"Сколько гелей нужно на марафон?","acceptedAnswer":{"@type":"Answer","text":"Зависит от длительности и интенсивности. В среднем 40-60 г углеводов в час, это 2-3 геля в час. На марафон 4 часа — около 8-10 гелей. Используйте раздел ПИТАНИЕ калькулятора для точного расчёта."}},{"@type":"Question","name":"Что такое негативный сплит?","acceptedAnswer":{"@type":"Answer","text":"Стратегия, когда вторая половина дистанции пробегается быстрее первой (обычно на 1-3%). Считается оптимальной для марафона. В калькуляторе можно переключить таблицу сплитов между равномерным и негативным вариантом."}},{"@type":"Question","name":"Сколько пить воды на марафоне?","acceptedAnswer":{"@type":"Answer","text":"400-800 мл/час в зависимости от температуры и веса. В жару (>25°C) — до 800 мл/ч. Используйте раздел ПИТАНИЕ для расчёта с учётом ваших параметров."}},{"@type":"Question","name":"Как рассчитать время на Ironman?","acceptedAnswer":{"@type":"Answer","text":"В разделе ТРИАТЛОН выберите Ironman 140.6, введите темп плавания (мин/100м), скорость велосипеда (км/ч), темп бега (мин/км) и время транзиток. Калькулятор покажет общее время и разбивку по этапам."}}]}</script>

  <style>
    :root { --primary:#FF3B30; --primary-glow:rgba(255,59,48,0.5); --bg-main:#080808; --bg-card:rgba(255,255,255,0.03); --border-color:rgba(255,255,255,0.08); --text-white:#FFFFFF; --text-gray:#9CA3AF; --container-width:1240px; --radius-card:24px; --radius-pill:100px; }
    * { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
    body { font-family:'Manrope',-apple-system,BlinkMacSystemFont,sans-serif; background-color:var(--bg-main); color:var(--text-white); line-height:1.6; font-size:16px; -webkit-font-smoothing:antialiased; background-image:radial-gradient(1200px 600px at 50% -10%,rgba(255,59,48,0.20) 0%,rgba(8,8,8,0) 60%),radial-gradient(900px 500px at 15% 35%,rgba(255,59,48,0.10) 0%,rgba(8,8,8,0) 55%),radial-gradient(1200px 700px at 85% 70%,rgba(255,59,48,0.08) 0%,rgba(8,8,8,0) 60%); background-attachment:fixed; min-height:100vh; overflow-x:hidden; }
    body::before { content:""; position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:-1; opacity:0.04; background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E"); }
    .title-font { font-family:'Unbounded',sans-serif; text-transform:uppercase; letter-spacing:-0.02em; }
    .tech-font { font-family:'JetBrains Mono',monospace; font-size:12px; opacity:0.7; text-transform:uppercase; }
    a { text-decoration:none; color:inherit; transition:0.3s; cursor:pointer; }
    button { border:none; outline:none; cursor:pointer; }
    .container { max-width:var(--container-width); margin:0 auto; padding:0 24px; }
    .section { padding:100px 0 80px; }
    .header { position:fixed; top:24px; left:0; right:0; z-index:100; display:flex; justify-content:center; pointer-events:none; }
    .header-island { pointer-events:auto; background:rgba(10,10,10,0.6); backdrop-filter:blur(16px); -webkit-backdrop-filter:blur(16px); border:1px solid rgba(255,255,255,0.08); border-radius:var(--radius-pill); padding:10px 32px; display:flex; align-items:center; gap:48px; box-shadow:0 20px 40px rgba(0,0,0,0.4); }
    .logo { font-size:18px; font-weight:700; display:flex; align-items:center; gap:8px; font-family:'Unbounded'; }
    .logo span { color:var(--primary); }
    .nav-desk { display:flex; gap:32px; font-family:'Unbounded'; }
    .nav-link { font-size:13px; font-weight:600; color:var(--text-gray); position:relative; font-family:'Unbounded'; }
    .nav-link:hover { color:white; }
    .nav-link.active { color:white; }
    .nav-link.active::after { content:''; position:absolute; bottom:-6px; left:50%; transform:translateX(-50%); width:4px; height:4px; background:var(--primary); border-radius:50%; }
    .burger { display:none; font-size:28px; color:white; pointer-events:auto; cursor:pointer; }
    .mobile-menu { position:fixed; inset:0; background:#080808; z-index:999; display:flex; flex-direction:column; justify-content:center; padding:40px; opacity:0; pointer-events:none; transition:0.3s; }
    .mobile-menu.active { opacity:1; pointer-events:all; }
    .mobile-link { font-family:'Unbounded'; font-size:32px; color:white; margin-bottom:32px; display:block; font-weight:700; }
    .close-menu { position:absolute; top:32px; right:32px; font-size:32px; color:white; padding:10px; }
    .btn { display:inline-flex; justify-content:center; align-items:center; background:var(--text-white); color:#000; height:56px; padding:0 40px; border-radius:var(--radius-pill); font-size:14px; font-weight:700; transition:0.3s; }
    .btn:hover { transform:translateY(-2px); box-shadow:0 10px 30px rgba(255,255,255,0.15); }

    .calc-container { padding:32px; background:var(--bg-card); border-radius:var(--radius-card); border:1px solid var(--border-color); backdrop-filter:blur(10px); }
    .calc-tabs { display:flex; gap:8px; margin-bottom:28px; }
    .calc-tab { background:rgba(255,255,255,0.04); color:var(--text-gray); font-family:'Unbounded'; font-size:12px; cursor:pointer; padding:8px 20px; transition:0.3s; border-radius:var(--radius-pill); letter-spacing:0.02em; }
    .calc-tab.active { color:white; background:var(--primary); }
    .calc-tab:hover:not(.active) { background:rgba(255,255,255,0.08); color:white; }
    .calc-mode { display:none; }
    .calc-mode.active { display:block; animation:fadeIn 0.3s ease; }
    @keyframes fadeIn { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:translateY(0)} }
    .calc-grid { display:grid; grid-template-columns:1fr 1fr; gap:40px; align-items:start; }
    .calc-input-group { margin-bottom:20px; }
    .calc-label { display:block; font-family:'JetBrains Mono',monospace; font-size:11px; color:var(--text-gray); margin-bottom:6px; letter-spacing:0.05em; text-transform:uppercase; }
    .calc-select,.calc-input { width:100%; background:rgba(255,255,255,0.03); border:1px solid var(--border-color); color:white; padding:12px 14px; border-radius:10px; font-family:'Manrope',sans-serif; font-size:15px; outline:none; transition:0.3s; }
    .calc-select:focus,.calc-input:focus { border-color:var(--primary); background:rgba(255,59,48,0.02); }
    .calc-row { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
    .calc-row-3 { display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px; }
    .toggle-group { display:inline-flex; background:rgba(255,255,255,0.04); border-radius:var(--radius-pill); border:1px solid var(--border-color); overflow:hidden; }
    .toggle-btn { padding:6px 16px; font-family:'JetBrains Mono',monospace; font-size:11px; color:var(--text-gray); cursor:pointer; transition:0.3s; background:transparent; letter-spacing:0.05em; }
    .toggle-btn.active { background:var(--primary); color:white; }
    .run-sub-tabs { display:flex; gap:6px; margin-bottom:20px; }
    .run-sub-tab { background:rgba(255,255,255,0.03); color:var(--text-gray); font-family:'JetBrains Mono',monospace; font-size:10px; cursor:pointer; padding:6px 14px; transition:0.3s; border-radius:var(--radius-pill); letter-spacing:0.03em; text-transform:uppercase; }
    .run-sub-tab.active { color:white; background:rgba(255,255,255,0.12); border:1px solid rgba(255,255,255,0.2); }
    .run-sub-mode { display:none; }
    .run-sub-mode.active { display:block; }
    .calc-result-box { background:rgba(0,0,0,0.25); border-radius:16px; padding:24px; border:1px solid var(--border-color); }
    .calc-res-title { font-family:'JetBrains Mono',monospace; font-size:10px; color:var(--text-gray); margin-bottom:16px; letter-spacing:0.08em; text-transform:uppercase; }
    .calc-main-res { font-family:'Unbounded'; font-size:24px; color:var(--primary); line-height:1.1; margin-bottom:4px; letter-spacing:-0.02em; }
    .calc-sub-res { font-family:'Manrope'; font-size:13px; color:var(--text-gray); margin-bottom:20px; }
    .calc-details { border-top:1px solid var(--border-color); padding-top:16px; display:grid; gap:10px; }
    .calc-detail-row { display:flex; justify-content:space-between; font-size:13px; font-family:'Manrope'; }
    .calc-detail-row span:first-child { color:var(--text-gray); }
    .calc-detail-row span:last-child { color:white; font-weight:500; }
    .res-unit { font-size:0.55em; color:var(--text-gray); font-weight:400; margin:0 1px 0 2px; letter-spacing:0; }
    .nut-result-grid { display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:16px; }
    .nut-card { background:rgba(0,0,0,0.25); border-radius:14px; padding:18px; border:1px solid var(--border-color); }
    .nut-card-icon { font-size:20px; margin-bottom:8px; opacity:0.8; }
    .nut-card-value { font-family:'Unbounded'; font-size:24px; color:var(--primary); line-height:1.1; margin-bottom:2px; }
    .nut-card-label { font-family:'JetBrains Mono',monospace; font-size:10px; color:var(--text-gray); text-transform:uppercase; letter-spacing:0.05em; }
    .nut-card-sub { font-size:12px; color:var(--text-gray); margin-top:6px; }
    .nut-products { margin-top:16px; }
    .nut-prod-title { font-family:'JetBrains Mono',monospace; font-size:10px; color:var(--text-gray); text-transform:uppercase; letter-spacing:0.08em; margin-bottom:10px; padding-bottom:8px; border-bottom:1px solid var(--border-color); }
    .nut-prod-row { display:flex; justify-content:space-between; align-items:center; padding:8px 0; font-size:13px; border-bottom:1px solid rgba(255,255,255,0.04); }
    .nut-prod-row:last-child { border-bottom:none; }
    .nut-prod-name { color:var(--text-gray); display:flex; align-items:center; gap:8px; }
    .nut-prod-name i { font-size:14px; width:18px; text-align:center; }
    .nut-prod-qty { color:white; font-weight:500; font-family:'JetBrains Mono',monospace; font-size:12px; }
    .nut-timeline { margin-top:16px; }
    .nut-tl-title { font-family:'JetBrains Mono',monospace; font-size:10px; color:var(--text-gray); text-transform:uppercase; letter-spacing:0.08em; margin-bottom:10px; padding-bottom:8px; border-bottom:1px solid var(--border-color); }
    .nut-tl-item { display:flex; gap:12px; padding:8px 0; font-size:13px; }
    .nut-tl-time { font-family:'JetBrains Mono',monospace; font-size:11px; color:var(--primary); min-width:70px; flex-shrink:0; }
    .nut-tl-desc { color:var(--text-gray); }
    .vdot-badge { display:inline-flex; align-items:center; gap:6px; background:rgba(255,59,48,0.08); border:1px solid rgba(255,59,48,0.25); border-radius:var(--radius-pill); padding:5px 14px; font-family:'JetBrains Mono',monospace; font-size:10px; color:var(--text-gray); text-transform:uppercase; letter-spacing:0.05em; margin-top:8px; }
    .vdot-badge span { font-family:'Unbounded'; font-size:15px; color:var(--primary); font-weight:600; letter-spacing:-0.02em; }
    .zone-row { display:flex; align-items:center; gap:10px; padding:7px 0; font-size:13px; font-family:'Manrope'; border-bottom:1px solid rgba(255,255,255,0.04); }
    .zone-row:last-child { border-bottom:none; }
    .zone-dot { width:8px; height:8px; border-radius:50%; flex-shrink:0; }
    .zone-name { color:var(--text-gray); min-width:100px; font-size:12px; }
    .zone-pace { color:white; font-weight:500; font-size:12px; font-family:'JetBrains Mono',monospace; }
    .split-controls { display:flex; gap:8px; flex-wrap:wrap; margin-bottom:12px; }
    .split-table { max-height:280px; overflow-y:auto; scrollbar-width:thin; scrollbar-color:rgba(255,255,255,0.1) transparent; }
    .split-table::-webkit-scrollbar { width:4px; }
    .split-table::-webkit-scrollbar-track { background:transparent; }
    .split-table::-webkit-scrollbar-thumb { background:rgba(255,255,255,0.1); border-radius:2px; }
    .split-header { display:flex; justify-content:space-between; padding:6px 0; font-size:10px; font-family:'JetBrains Mono',monospace; color:var(--text-gray); text-transform:uppercase; letter-spacing:0.05em; border-bottom:1px solid var(--border-color); }
    .split-row { display:flex; justify-content:space-between; padding:5px 0; font-size:12px; border-bottom:1px solid rgba(255,255,255,0.03); }
    .split-row span:first-child { color:var(--text-gray); font-family:'JetBrains Mono',monospace; font-size:11px; min-width:50px; }
    .split-row span:nth-child(2) { color:white; font-weight:500; font-family:'JetBrains Mono',monospace; font-size:11px; min-width:65px; text-align:right; }
    .split-row span:last-child { color:var(--text-gray); font-family:'JetBrains Mono',monospace; font-size:11px; min-width:75px; text-align:right; }
    .footer { padding:80px 0 40px; border-top:1px solid var(--border-color); text-align:center; }
    .to-top-btn { position:fixed; right:24px; bottom:24px; width:46px; height:46px; border-radius:50%; background:rgba(10,10,10,0.7); border:1px solid rgba(255,255,255,0.15); color:#fff; display:inline-flex; align-items:center; justify-content:center; font-size:18px; opacity:0; pointer-events:none; transition:0.25s; z-index:999; backdrop-filter:blur(8px); }
    .to-top-btn.show { opacity:1; pointer-events:auto; }
    @media(max-width:1024px) { .header-island{width:100%;margin:0 16px;padding:12px 24px;justify-content:space-between} .nav-desk{display:none} .burger{display:block} .calc-grid{grid-template-columns:1fr;gap:20px} .calc-container{padding:20px} .section{padding:88px 0 60px} }
    @media(max-width:640px) { body{background-attachment:scroll} .container{padding:0 20px} .nut-result-grid{grid-template-columns:1fr 1fr;gap:8px} .nut-card{padding:14px} .nut-card-value{font-size:20px} .calc-main-res{font-size:20px} .run-sub-tabs{flex-wrap:wrap} .zone-name{min-width:80px;font-size:11px} .zone-pace{font-size:11px} }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-island">
      <a href="index.html" class="logo">INNA<span>TRI</span></a>
      <nav class="nav-desk">
        <a href="index.html" class="nav-link">ГЛАВНАЯ</a>
        <a href="run.html" class="nav-link">БЕГ</a>
        <a href="blog.html" class="nav-link">БЛОГ</a>
        <a href="reviews.html" class="nav-link">ОТЗЫВЫ</a>
        <a href="calculator.html" class="nav-link active">КАЛЬКУЛЯТОР</a>
        <a href="pricing.html" class="nav-link">ТАРИФЫ</a>
        <a href="contact.html" class="nav-link">КОНТАКТЫ</a>
        <a href="runners-nutrition-essentials.html" class="nav-link" style="color:var(--primary);">ГАЙД</a>
      </nav>
      <a href="en/calculator.html" class="lang-switch" style="font-family:'JetBrains Mono',monospace;font-size:12px;color:rgba(255,255,255,0.5);border:1px solid rgba(255,255,255,0.15);padding:4px 10px;border-radius:4px;text-decoration:none;margin-left:12px;transition:all 0.3s ease;letter-spacing:1px;">EN</a>
      <div class="burger" onclick="toggleMenu()"><i class="ph ph-list"></i></div>
    </div>
  </header>

  <div class="mobile-menu" id="mobileMenu">
    <div class="close-menu" onclick="toggleMenu()"><i class="ph ph-x"></i></div>
    <a href="index.html" class="mobile-link" onclick="toggleMenu()">ГЛАВНАЯ</a>
    <a href="run.html" class="mobile-link" onclick="toggleMenu()">БЕГ</a>
    <a href="blog.html" class="mobile-link" onclick="toggleMenu()">БЛОГ</a>
    <a href="reviews.html" class="mobile-link" onclick="toggleMenu()">ОТЗЫВЫ</a>
    <a href="calculator.html" class="mobile-link" onclick="toggleMenu()">КАЛЬКУЛЯТОР</a>
    <a href="pricing.html" class="mobile-link" onclick="toggleMenu()">ТАРИФЫ</a>
    <a href="contact.html" class="mobile-link" onclick="toggleMenu()">КОНТАКТЫ</a>
    <a href="runners-nutrition-essentials.html" class="mobile-link" onclick="toggleMenu()" style="color:var(--primary);">ГАЙД</a>
    <a href="en/calculator.html" class="mobile-link" onclick="toggleMenu()" style="font-family:'JetBrains Mono',monospace;font-size:14px;letter-spacing:2px;opacity:0.6;">EN</a>
  </div>

  <section id="calculator" class="section">
    <div class="container">
      <h1 class="title-font" style="text-align:center;margin-bottom:12px;font-size:clamp(22px,4vw,32px);">КАЛЬКУЛЯТОР ТЕМПА БЕГА</h1>
      <p style="text-align:center;max-width:720px;margin:0 auto 28px;color:var(--text-gray);font-size:15px;">VDOT, тренировочные зоны, прогнозы на 8 дистанций, сплиты и план питания для бега и триатлона</p>
      <div class="calc-container">
        <div class="calc-tabs">
          <button class="calc-tab active" onclick="switchCalcMode('tri',event)">ТРИАТЛОН</button>
          <button class="calc-tab" onclick="switchCalcMode('run',event)">БЕГ</button>
          <button class="calc-tab" onclick="switchCalcMode('nutrition',event)">ПИТАНИЕ</button>
        </div>

        <!-- TRIATHLON -->
        <div id="calc-tri" class="calc-mode active">
          <div class="calc-input-group">
            <select id="triDist" class="calc-select">
              <option value="sprint">Sprint (0.75 / 20 / 5)</option>
              <option value="olympic">Olympic (1.5 / 40 / 10)</option>
              <option value="half">Ironman 70.3 (1.9 / 90 / 21.1)</option>
              <option value="full">Ironman 140.6 (3.8 / 180 / 42.2)</option>
            </select>
          </div>
          <div class="calc-grid">
            <div>
              <div class="calc-input-group"><label class="calc-label">Плавание (мин/100м)</label><div class="calc-row"><input type="number" id="triSwimM" class="calc-input" placeholder="Мин" value="2" min="0" inputmode="numeric"><input type="number" id="triSwimS" class="calc-input" placeholder="Сек" value="00" min="0" max="59" inputmode="numeric"></div></div>
              <div class="calc-input-group"><label class="calc-label">Вело (км/ч)</label><input type="number" id="triBikeSpeed" class="calc-input" placeholder="км/ч" value="30" min="0" step="0.1" inputmode="decimal"></div>
              <div class="calc-input-group"><label class="calc-label">Бег (мин/км)</label><div class="calc-row"><input type="number" id="triRunM" class="calc-input" placeholder="Мин" value="5" min="0" inputmode="numeric"><input type="number" id="triRunS" class="calc-input" placeholder="Сек" value="30" min="0" max="59" inputmode="numeric"></div></div>
              <div class="calc-input-group"><label class="calc-label">Транзитки Т1+Т2 (мин)</label><input type="number" id="triT1T2" class="calc-input" placeholder="Мин" value="5" min="0" inputmode="numeric"></div>
            </div>
            <div class="calc-result-box">
              <div class="calc-res-title">РЕЗУЛЬТАТ</div>
              <div class="calc-main-res" id="triTotalResult">--</div>
              <div class="calc-sub-res" id="triSubResult">общее время</div>
              <div class="calc-details" id="triDetails"></div>
            </div>
          </div>
        </div>

        <!-- RUNNING -->
        <div id="calc-run" class="calc-mode">
          <div class="run-sub-tabs">
            <button class="run-sub-tab active" onclick="switchRunMode('time',this)">ЗНАЮ ВРЕМЯ</button>
            <button class="run-sub-tab" onclick="switchRunMode('pace',this)">ЗНАЮ ТЕМП</button>
            <button class="run-sub-tab" onclick="switchRunMode('speed',this)">ЗНАЮ СКОРОСТЬ</button>
          </div>
          <div class="calc-grid">
            <div>
              <div id="run-mode-time" class="run-sub-mode active">
                <div class="calc-input-group"><label class="calc-label">Дистанция</label><select id="runDist1" class="calc-select run-input" onchange="handleDistChange(1)"><option value="5">5 км</option><option value="10" selected>10 км</option><option value="21.1">Полумарафон (21.1 км)</option><option value="42.2">Марафон (42.2 км)</option><option value="custom">Своя дистанция</option></select><input type="number" id="runCustomDist1" class="calc-input run-input" placeholder="Дистанция в км" min="0.1" step="0.1" inputmode="decimal" style="display:none;margin-top:8px;"></div>
                <div class="calc-input-group"><label class="calc-label">Ваше время</label><div class="calc-row-3"><input type="number" id="runH1" class="calc-input run-input" placeholder="Ч" min="0" inputmode="numeric"><input type="number" id="runM1" class="calc-input run-input" placeholder="Мин" value="50" min="0" inputmode="numeric"><input type="number" id="runS1" class="calc-input run-input" placeholder="Сек" value="0" min="0" max="59" inputmode="numeric"></div></div>
              </div>
              <div id="run-mode-pace" class="run-sub-mode">
                <div class="calc-input-group"><label class="calc-label">Дистанция</label><select id="runDist2" class="calc-select run-input" onchange="handleDistChange(2)"><option value="5">5 км</option><option value="10" selected>10 км</option><option value="21.1">Полумарафон (21.1 км)</option><option value="42.2">Марафон (42.2 км)</option><option value="custom">Своя дистанция</option></select><input type="number" id="runCustomDist2" class="calc-input run-input" placeholder="Дистанция в км" min="0.1" step="0.1" inputmode="decimal" style="display:none;margin-top:8px;"></div>
                <div class="calc-input-group"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;"><label class="calc-label" style="margin:0;">Темп</label><div class="toggle-group" id="paceUnitToggle"><span class="toggle-btn active" onclick="setPaceUnit('km',this)">МИН/КМ</span><span class="toggle-btn" onclick="setPaceUnit('mi',this)">МИН/МИЛЯ</span></div></div><div class="calc-row"><input type="number" id="paceM" class="calc-input run-input" placeholder="Мин" value="5" min="0" inputmode="numeric"><input type="number" id="paceS" class="calc-input run-input" placeholder="Сек" value="30" min="0" max="59" inputmode="numeric"></div></div>
              </div>
              <div id="run-mode-speed" class="run-sub-mode">
                <div class="calc-input-group"><label class="calc-label">Дистанция</label><select id="runDist3" class="calc-select run-input" onchange="handleDistChange(3)"><option value="5">5 км</option><option value="10" selected>10 км</option><option value="21.1">Полумарафон (21.1 км)</option><option value="42.2">Марафон (42.2 км)</option><option value="custom">Своя дистанция</option></select><input type="number" id="runCustomDist3" class="calc-input run-input" placeholder="Дистанция в км" min="0.1" step="0.1" inputmode="decimal" style="display:none;margin-top:8px;"></div>
                <div class="calc-input-group"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;"><label class="calc-label" style="margin:0;">Скорость</label><div class="toggle-group" id="speedUnitToggle"><span class="toggle-btn active" onclick="setSpeedUnit('kmh',this)">КМ/Ч</span><span class="toggle-btn" onclick="setSpeedUnit('mph',this)">МИЛЬ/Ч</span></div></div><input type="number" id="speedVal" class="calc-input run-input" placeholder="км/ч" value="10.9" min="0" step="0.1" inputmode="decimal"></div>
              </div>
            </div>
            <div class="calc-result-box">
              <div class="calc-res-title">РЕЗУЛЬТАТ</div>
              <div class="calc-main-res" id="runMainResult">--</div>
              <div class="calc-sub-res" id="runSubResult"></div>
              <div id="runVdot"></div>
              <div class="calc-details" id="runDetails"></div>
              <div class="calc-details" id="runPredictions" style="margin-top:12px;"></div>
              <div class="calc-details" id="runZones" style="margin-top:12px;"></div>
              <div class="calc-details" id="runSplits" style="margin-top:12px;"></div>
            </div>
          </div>
        </div>

        <!-- NUTRITION -->
        <div id="calc-nutrition" class="calc-mode">
          <div class="calc-grid">
            <div>
              <div class="calc-input-group"><label class="calc-label">Вес (кг)</label><input type="number" id="nutWeight" class="calc-input nut-input" placeholder="кг" value="70" min="30" max="200" inputmode="numeric"></div>
              <div class="calc-input-group"><label class="calc-label">Длительность гонки</label><div class="calc-row"><input type="number" id="nutH" class="calc-input nut-input" placeholder="Часы" value="4" min="0" inputmode="numeric"><input type="number" id="nutM" class="calc-input nut-input" placeholder="Мин" value="0" min="0" inputmode="numeric"></div></div>
              <div class="calc-input-group"><label class="calc-label">Интенсивность</label><select id="nutIntense" class="calc-select nut-input"><option value="low">Спокойная (Z1-Z2)</option><option value="med" selected>Соревновательная (Z3)</option><option value="high">Высокая (Z4-Z5)</option></select></div>
              <div class="calc-input-group"><label class="calc-label">Температура</label><select id="nutTemp" class="calc-select nut-input"><option value="cool">Прохладно (&lt;15°C)</option><option value="moderate" selected>Умеренно (15–25°C)</option><option value="hot">Жарко (&gt;25°C)</option></select></div>
              <div class="calc-input-group"><label class="calc-label">Вид спорта</label><select id="nutSport" class="calc-select nut-input"><option value="running" selected>Бег</option><option value="triathlon">Триатлон</option><option value="cycling">Велосипед</option></select></div>
            </div>
            <div>
              <div class="nut-result-grid" id="nutCards"></div>
              <div class="nut-products" id="nutProducts"></div>
              <div class="nut-timeline" id="nutTimeline"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- SEO: Informational content block -->
  <section style="padding:0 0 60px;">
    <div class="container" style="max-width:860px;">
      <h2 class="title-font" style="font-size:clamp(18px,3vw,24px);margin-bottom:20px;text-align:center;">КАК ПОЛЬЗОВАТЬСЯ КАЛЬКУЛЯТОРОМ БЕГА</h2>
      <div style="color:var(--text-gray);font-size:14px;line-height:1.8;">
        <p style="margin-bottom:14px;">Этот калькулятор темпа бега объединяет в одном инструменте всё, что нужно бегуну и триатлету: расчёт темпа и скорости, показатель беговой формы <strong style="color:var(--text-white);">VDOT</strong> по формуле Джека Дэниелса, пять тренировочных зон, прогнозы на 8 дистанций от 1 км до марафона, таблицу сплитов и план питания на гонку.</p>
        <p style="margin-bottom:14px;"><strong style="color:var(--text-white);">VDOT</strong> — ключевой показатель в системе Дэниелса. Он рассчитывается по вашему результату на любой дистанции и показывает текущий уровень аэробной подготовки. На основе VDOT калькулятор определяет пять тренировочных зон: лёгкий бег (Easy), марафонский темп, пороговый (Threshold), интервальный и повторный. Каждая зона работает на развитие конкретных физиологических качеств.</p>
        <p style="margin-bottom:14px;"><strong style="color:var(--text-white);">Прогнозы</strong> рассчитываются по формуле Ригеля: T2&nbsp;=&nbsp;T1&nbsp;&times;&nbsp;(D2/D1)<sup>1.06</sup>. Введите результат на одной дистанции — получите прогноз на все остальные. Таблица сплитов покажет раскладку по километрам или милям с выбором равномерной или негативной стратегии.</p>
        <p><strong style="color:var(--text-white);">Калькулятор питания</strong> основан на рекомендациях ACSM и ISSN для любителей. Он рассчитывает углеводы (30-90 г/ч), жидкость (400-800 мл/ч), натрий и кофеин с учётом вашего веса, интенсивности и температуры, а также даёт конкретные рекомендации по продуктам и таймлайн приёма.</p>
      </div>
    </div>
  </section>

  <!-- SEO: Visible FAQ section -->
  <section style="padding:0 0 80px;">
    <div class="container" style="max-width:860px;">
      <h2 class="title-font" style="font-size:clamp(18px,3vw,24px);margin-bottom:24px;text-align:center;">ЧАСТЫЕ ВОПРОСЫ</h2>
      <div style="display:grid;gap:16px;">
        <details style="background:var(--bg-card);border:1px solid var(--border-color);border-radius:14px;padding:18px 20px;">
          <summary style="cursor:pointer;font-family:'Unbounded',sans-serif;font-size:13px;font-weight:600;list-style:none;display:flex;justify-content:space-between;align-items:center;">Как рассчитать темп на марафон по результату 5К?<span style="color:var(--primary);font-size:18px;flex-shrink:0;margin-left:12px;">+</span></summary>
          <p style="color:var(--text-gray);font-size:14px;margin-top:12px;line-height:1.7;">Введите дистанцию 5 км и ваше время в разделе БЕГ. Калькулятор по формуле Ригеля покажет прогноз на марафон и другие дистанции. Например, 5К за 25 минут — это примерно 3:52 на марафон.</p>
        </details>
        <details style="background:var(--bg-card);border:1px solid var(--border-color);border-radius:14px;padding:18px 20px;">
          <summary style="cursor:pointer;font-family:'Unbounded',sans-serif;font-size:13px;font-weight:600;list-style:none;display:flex;justify-content:space-between;align-items:center;">Что такое VDOT и какой показатель хороший?<span style="color:var(--primary);font-size:18px;flex-shrink:0;margin-left:12px;">+</span></summary>
          <p style="color:var(--text-gray);font-size:14px;margin-top:12px;line-height:1.7;">VDOT — показатель беговой формы по методике Джека Дэниелса. VDOT 30-35 — начинающий бегун, 40-45 — средний уровень, 50-55 — продвинутый, 60+ — элитный уровень.</p>
        </details>
        <details style="background:var(--bg-card);border:1px solid var(--border-color);border-radius:14px;padding:18px 20px;">
          <summary style="cursor:pointer;font-family:'Unbounded',sans-serif;font-size:13px;font-weight:600;list-style:none;display:flex;justify-content:space-between;align-items:center;">Что такое тренировочные зоны Дэниелса?<span style="color:var(--primary);font-size:18px;flex-shrink:0;margin-left:12px;">+</span></summary>
          <p style="color:var(--text-gray);font-size:14px;margin-top:12px;line-height:1.7;">5 зон темпа: Easy (лёгкий, 65-79% VO2max), Марафонский, Пороговый (лактатный порог), Интервальный (95-100% VO2max) и Повторный. Каждая зона развивает разные физиологические качества.</p>
        </details>
        <details style="background:var(--bg-card);border:1px solid var(--border-color);border-radius:14px;padding:18px 20px;">
          <summary style="cursor:pointer;font-family:'Unbounded',sans-serif;font-size:13px;font-weight:600;list-style:none;display:flex;justify-content:space-between;align-items:center;">Сколько гелей нужно на марафон?<span style="color:var(--primary);font-size:18px;flex-shrink:0;margin-left:12px;">+</span></summary>
          <p style="color:var(--text-gray);font-size:14px;margin-top:12px;line-height:1.7;">В среднем 40-60 г углеводов в час, это 2-3 геля в час. На марафон 4 часа — около 8-10 гелей. Используйте раздел ПИТАНИЕ для точного расчёта под ваши параметры.</p>
        </details>
        <details style="background:var(--bg-card);border:1px solid var(--border-color);border-radius:14px;padding:18px 20px;">
          <summary style="cursor:pointer;font-family:'Unbounded',sans-serif;font-size:13px;font-weight:600;list-style:none;display:flex;justify-content:space-between;align-items:center;">Что такое негативный сплит?<span style="color:var(--primary);font-size:18px;flex-shrink:0;margin-left:12px;">+</span></summary>
          <p style="color:var(--text-gray);font-size:14px;margin-top:12px;line-height:1.7;">Стратегия, когда вторая половина дистанции пробегается быстрее первой (на 1-3%). Считается оптимальной для марафона. В таблице сплитов можно переключить между равномерным и негативным вариантом.</p>
        </details>
        <details style="background:var(--bg-card);border:1px solid var(--border-color);border-radius:14px;padding:18px 20px;">
          <summary style="cursor:pointer;font-family:'Unbounded',sans-serif;font-size:13px;font-weight:600;list-style:none;display:flex;justify-content:space-between;align-items:center;">Сколько пить воды на марафоне?<span style="color:var(--primary);font-size:18px;flex-shrink:0;margin-left:12px;">+</span></summary>
          <p style="color:var(--text-gray);font-size:14px;margin-top:12px;line-height:1.7;">400-800 мл/час в зависимости от температуры и веса. В жару (>25°C) — до 800 мл/ч. Не ждите жажды — пейте по 150-200 мл каждые 15-20 минут.</p>
        </details>
        <details style="background:var(--bg-card);border:1px solid var(--border-color);border-radius:14px;padding:18px 20px;">
          <summary style="cursor:pointer;font-family:'Unbounded',sans-serif;font-size:13px;font-weight:600;list-style:none;display:flex;justify-content:space-between;align-items:center;">Как рассчитать время на Ironman?<span style="color:var(--primary);font-size:18px;flex-shrink:0;margin-left:12px;">+</span></summary>
          <p style="color:var(--text-gray);font-size:14px;margin-top:12px;line-height:1.7;">В разделе ТРИАТЛОН выберите Ironman 140.6, введите темп плавания (мин/100м), скорость велосипеда (км/ч), темп бега (мин/км) и время транзиток. Калькулятор покажет общее время и разбивку по этапам.</p>
        </details>
        <details style="background:var(--bg-card);border:1px solid var(--border-color);border-radius:14px;padding:18px 20px;">
          <summary style="cursor:pointer;font-family:'Unbounded',sans-serif;font-size:13px;font-weight:600;list-style:none;display:flex;justify-content:space-between;align-items:center;">Как работает раздел ПИТАНИЕ?<span style="color:var(--primary);font-size:18px;flex-shrink:0;margin-left:12px;">+</span></summary>
          <p style="color:var(--text-gray);font-size:14px;margin-top:12px;line-height:1.7;">Введите вес, длительность гонки, интенсивность и температуру. Калькулятор рассчитает углеводы, жидкость, натрий и кофеин по рекомендациям ACSM/ISSN, а также покажет конкретные продукты и таймлайн приёма.</p>
        </details>
      </div>
    </div>
  </section>

  <footer class="footer">
    <div class="container">
      <h2 class="title-font" style="font-size:24px;margin-bottom:30px;">ГОТОВЫ СТАТЬ IRONMAN?</h2>
      <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;">
        <a href="https://t.me/InnaRH" class="btn" style="background:transparent;border:1px solid #333;color:white;display:inline-flex;align-items:center;gap:8px;"><i class="fa-brands fa-telegram"></i> TELEGRAM</a>
        <a href="https://www.instagram.com/inna.tri" class="btn" style="background:transparent;border:1px solid #333;color:white;display:inline-flex;align-items:center;gap:8px;"><i class="fa-brands fa-instagram"></i> INSTAGRAM</a>
        <a href="https://www.youtube.com/@innatri" class="btn" style="background:transparent;border:1px solid #333;color:white;display:inline-flex;align-items:center;gap:8px;"><i class="fa-brands fa-youtube"></i> YOUTUBE</a>
      </div>
      <p class="tech-font" style="margin-top:40px;">&copy; 2026 INNATRI. SYSTEMATIC COACHING.</p>
    </div>
  </footer>

  <button class="to-top-btn" id="toTopBtn" onclick="window.scrollTo({top:0,behavior:'smooth'})"><i class="ph ph-arrow-up"></i></button>

  <script>
    function toggleMenu(){const m=document.getElementById('mobileMenu');m.classList.toggle('active');document.body.style.overflow=m.classList.contains('active')?'hidden':'auto'}
    function switchCalcMode(mode,e){document.querySelectorAll('.calc-mode').forEach(el=>el.classList.remove('active'));document.querySelectorAll('.calc-tab').forEach(el=>el.classList.remove('active'));document.getElementById('calc-'+mode).classList.add('active');if(e&&e.target)e.target.classList.add('active');if(mode==='tri')calculateTriTime();if(mode==='run')calculateRun();if(mode==='nutrition')calculateNutrition()}

    const MI=1.60934;

    /* Unified formatting: main result = red numbers + small gray units */
    function formatMainRes(sec){
      if(!isFinite(sec)||sec<=0)return'--';
      sec=Math.round(sec);const h=Math.floor(sec/3600),m=Math.floor((sec%3600)/60),s=sec%60;
      if(h>0)return`${h}<span class="res-unit">ч</span>${String(m).padStart(2,'0')}<span class="res-unit">мин</span>`;
      if(m>0&&s>0)return`${m}<span class="res-unit">мин</span>${String(s).padStart(2,'0')}<span class="res-unit">сек</span>`;
      if(m>0)return`${m}<span class="res-unit">мин</span>`;
      return`${s}<span class="res-unit">сек</span>`;
    }
    function formatHMStext(sec){if(!isFinite(sec)||sec<=0)return'--';sec=Math.round(sec);const h=Math.floor(sec/3600),m=Math.floor((sec%3600)/60),s=sec%60;if(h>0)return`${h}ч ${String(m).padStart(2,'0')}мин`;return`${m}мин ${String(s).padStart(2,'0')}сек`}
    function formatPace(s){if(!isFinite(s)||s<=0)return'--';const m=Math.floor(s/60),ss=Math.round(s%60);return`${m}:${String(ss).padStart(2,'0')}`}

    /* Custom distance handling */
    function handleDistChange(n){
      const sel=document.getElementById('runDist'+n);
      const inp=document.getElementById('runCustomDist'+n);
      inp.style.display=sel.value==='custom'?'block':'none';
      calculateRun();
    }
    function getDistKm(n){
      const sel=document.getElementById('runDist'+n);
      if(sel.value==='custom'){return parseFloat(document.getElementById('runCustomDist'+n).value)||0}
      return parseFloat(sel.value)||10;
    }

    /* VDOT — Jack Daniels formula */
    function estimateVDOT(distKm,timeSec){
      if(distKm<=0||timeSec<=0)return 0;
      const tMin=timeSec/60;
      const v=distKm*1000/tMin; // meters per minute
      const pctVO2=0.8+0.1894393*Math.exp(-0.012778*tMin)+0.2989558*Math.exp(-0.1932605*tMin);
      const vo2=-4.60+0.182258*v+0.000104*v*v;
      const vdot=vo2/pctVO2;
      return Math.max(1,Math.round(vdot*10)/10);
    }

    /* Training paces from VDOT — reverse Daniels formula */
    function vdotToPaceSec(vdot,pctVO2max){
      // Given VDOT and desired %VO2max, find pace in sec/km
      // vo2 = vdot * pctVO2max
      // vo2 = -4.60 + 0.182258*v + 0.000104*v^2  →  solve for v (m/min)
      const vo2=vdot*pctVO2max;
      // Quadratic: 0.000104*v^2 + 0.182258*v + (-4.60 - vo2) = 0
      const a=0.000104,b=0.182258,c=-4.60-vo2;
      const disc=b*b-4*a*c;
      if(disc<0)return 0;
      const v=(-b+Math.sqrt(disc))/(2*a); // meters per minute
      if(v<=0)return 0;
      return 1000/v*60; // sec per km
    }
    function getTrainingZones(vdot){
      return{
        easy:{min:vdotToPaceSec(vdot,0.59),max:vdotToPaceSec(vdot,0.74)},
        marathon:{pace:vdotToPaceSec(vdot,0.79)},
        threshold:{pace:vdotToPaceSec(vdot,0.88)},
        interval:{pace:vdotToPaceSec(vdot,0.98)},
        repetition:{pace:vdotToPaceSec(vdot,1.10)}
      };
    }

    /* TRIATHLON */
    function calculateTriTime(){
      const dm={sprint:{swim:0.75,bike:20,run:5},olympic:{swim:1.5,bike:40,run:10},half:{swim:1.9,bike:90,run:21.1},full:{swim:3.8,bike:180,run:42.2}};
      const d=dm[document.getElementById('triDist').value];
      const sp=(parseFloat(document.getElementById('triSwimM').value)||0)*60+(parseFloat(document.getElementById('triSwimS').value)||0);
      const ss=sp*(d.swim*10);
      const bs=parseFloat(document.getElementById('triBikeSpeed').value)||30;
      const bk=bs>0?(d.bike/bs)*3600:0;
      const rp=(parseFloat(document.getElementById('triRunM').value)||0)*60+(parseFloat(document.getElementById('triRunS').value)||0);
      const rs=rp*d.run;
      const ts=(parseFloat(document.getElementById('triT1T2').value)||0)*60;
      const t=ss+bk+rs+ts;
      document.getElementById('triTotalResult').innerHTML=formatMainRes(t);
      document.getElementById('triDetails').innerHTML=
        `<div class="calc-detail-row"><span>Плавание (${d.swim} км)</span><span>${formatHMStext(ss)}</span></div>`+
        `<div class="calc-detail-row"><span>Вело (${d.bike} км)</span><span>${formatHMStext(bk)}</span></div>`+
        `<div class="calc-detail-row"><span>Бег (${d.run} км)</span><span>${formatHMStext(rs)}</span></div>`+
        `<div class="calc-detail-row"><span>Транзитки</span><span>${formatHMStext(ts)}</span></div>`;
    }

    /* RUNNING */
    let currentRunMode='time',paceUnit='km',speedUnit='kmh',splitUnit='km',splitType='even';
    function switchRunMode(mode,btn){currentRunMode=mode;document.querySelectorAll('.run-sub-mode').forEach(el=>el.classList.remove('active'));document.querySelectorAll('.run-sub-tab').forEach(el=>el.classList.remove('active'));document.getElementById('run-mode-'+mode).classList.add('active');btn.classList.add('active');calculateRun()}
    function setPaceUnit(u,btn){paceUnit=u;document.querySelectorAll('#paceUnitToggle .toggle-btn').forEach(b=>b.classList.remove('active'));btn.classList.add('active');calculateRun()}
    function setSpeedUnit(u,btn){speedUnit=u;document.querySelectorAll('#speedUnitToggle .toggle-btn').forEach(b=>b.classList.remove('active'));btn.classList.add('active');calculateRun()}
    function setSplitUnit(u,btn){splitUnit=u;document.querySelectorAll('#splitUnitToggle .toggle-btn').forEach(b=>b.classList.remove('active'));btn.classList.add('active');calculateRun()}
    function setSplitType(t,btn){splitType=t;document.querySelectorAll('#splitTypeToggle .toggle-btn').forEach(b=>b.classList.remove('active'));btn.classList.add('active');calculateRun()}

    function calculateRun(){
      let totalSec,distKm;
      const preds=[{d:1,l:'1 км'},{d:1.60934,l:'1 миля'},{d:3,l:'3 км'},{d:5,l:'5 км'},{d:10,l:'10 км'},{d:15,l:'15 км'},{d:21.1,l:'Полумарафон'},{d:42.2,l:'Марафон'}];

      if(currentRunMode==='time'){
        distKm=getDistKm(1);
        const h=parseFloat(document.getElementById('runH1').value)||0,m=parseFloat(document.getElementById('runM1').value)||0,s=parseFloat(document.getElementById('runS1').value)||0;
        totalSec=h*3600+m*60+s;if(totalSec<=0||distKm<=0){clearRun();return}
      } else if(currentRunMode==='pace'){
        distKm=getDistKm(2);
        const pm=parseFloat(document.getElementById('paceM').value)||0,ps=parseFloat(document.getElementById('paceS').value)||0;
        let pk=pm*60+ps;if(paceUnit==='mi')pk=pk/MI;
        if(pk<=0||distKm<=0){clearRun();return}totalSec=pk*distKm;
      } else {
        distKm=getDistKm(3);
        let spd=parseFloat(document.getElementById('speedVal').value)||0;
        if(speedUnit==='mph')spd=spd*MI;
        if(spd<=0||distKm<=0){clearRun();return}totalSec=(distKm/spd)*3600;
      }

      const pk=totalSec/distKm,pm=pk*MI,skm=(distKm/totalSec)*3600,smi=skm/MI;

      // Main result
      document.getElementById('runMainResult').innerHTML=formatMainRes(totalSec);
      document.getElementById('runSubResult').textContent='финишное время';

      // VDOT
      const vdot=estimateVDOT(distKm,totalSec);
      document.getElementById('runVdot').innerHTML=vdot>0?`<div class="vdot-badge">VDOT <span>${vdot.toFixed(1)}</span></div>`:'';

      // Pace & speed
      document.getElementById('runDetails').innerHTML=
        `<div class="calc-detail-row"><span>Темп</span><span>${formatPace(pk)} /км &middot; ${formatPace(pm)} /миля</span></div>`+
        `<div class="calc-detail-row"><span>Скорость</span><span>${skm.toFixed(1)} км/ч &middot; ${smi.toFixed(1)} миль/ч</span></div>`;

      // Predictions (8 distances, skip input distance)
      let ph='<div class="calc-res-title" style="margin-top:4px;">ПРОГНОЗ НА ДРУГИЕ ДИСТАНЦИИ</div>';
      preds.forEach(p=>{
        if(Math.abs(p.d-distKm)<0.01)return;
        const ps=totalSec*Math.pow(p.d/distKm,1.06);
        const pp=ps/p.d;
        ph+=`<div class="calc-detail-row"><span>${p.l}</span><span>${formatHMStext(ps)} &middot; ${formatPace(pp)} /км</span></div>`;
      });
      document.getElementById('runPredictions').innerHTML=ph;

      // Training zones
      if(vdot>0){
        const z=getTrainingZones(vdot);
        const colors={easy:'#4CAF50',marathon:'#2196F3',threshold:'#FF9800',interval:'#FF3B30',repetition:'#9C27B0'};
        const names={easy:'Easy',marathon:'Марафон',threshold:'Пороговый',interval:'Интервальный',repetition:'Повторный'};
        let zh=`<div class="calc-res-title" style="margin-top:4px;">ТРЕНИРОВОЧНЫЕ ЗОНЫ (VDOT ${vdot.toFixed(1)})</div>`;
        zh+=`<div class="zone-row"><span class="zone-dot" style="background:${colors.easy}"></span><span class="zone-name">${names.easy}</span><span class="zone-pace">${formatPace(z.easy.max)} - ${formatPace(z.easy.min)} /км &middot; ${formatPace(z.easy.max*MI)} - ${formatPace(z.easy.min*MI)} /ми</span></div>`;
        ['marathon','threshold','interval','repetition'].forEach(k=>{
          zh+=`<div class="zone-row"><span class="zone-dot" style="background:${colors[k]}"></span><span class="zone-name">${names[k]}</span><span class="zone-pace">${formatPace(z[k].pace)} /км &middot; ${formatPace(z[k].pace*MI)} /ми</span></div>`;
        });
        document.getElementById('runZones').innerHTML=zh;
      } else {
        document.getElementById('runZones').innerHTML='';
      }

      // Split table (only for >= 5km)
      if(distKm>=5){
        const splitDist=splitUnit==='km'?1:MI;
        const splitLabel=splitUnit==='km'?'км':'ми';
        const numSplits=Math.floor(distKm/splitDist);
        const remainder=distKm-numSplits*splitDist;
        const avgSplitSec=totalSec/distKm*splitDist;

        let sh=`<div class="calc-res-title" style="margin-top:4px;">ТАБЛИЦА СПЛИТОВ</div>`;
        sh+=`<div class="split-controls">`;
        sh+=`<div class="toggle-group" id="splitTypeToggle"><span class="toggle-btn${splitType==='even'?' active':''}" onclick="setSplitType('even',this)">РАВНОМЕРНО</span><span class="toggle-btn${splitType==='negative'?' active':''}" onclick="setSplitType('negative',this)">НЕГАТИВНЫЙ</span></div>`;
        sh+=`<div class="toggle-group" id="splitUnitToggle"><span class="toggle-btn${splitUnit==='km'?' active':''}" onclick="setSplitUnit('km',this)">КМ</span><span class="toggle-btn${splitUnit==='mi'?' active':''}" onclick="setSplitUnit('mi',this)">МИЛИ</span></div>`;
        sh+=`</div>`;
        sh+=`<div class="split-header"><span>#</span><span>Сплит</span><span>Время</span></div>`;
        sh+=`<div class="split-table">`;

        let cumSec=0;
        const totalSplits=numSplits+(remainder>0.01?1:0);
        const halfPoint=Math.ceil(totalSplits/2);

        for(let i=1;i<=numSplits;i++){
          let ss=avgSplitSec;
          if(splitType==='negative'){
            ss=i<=halfPoint?avgSplitSec*1.02:avgSplitSec*0.98;
          }
          cumSec+=ss;
          sh+=`<div class="split-row"><span>${i} ${splitLabel}</span><span>${formatPace(ss)}</span><span>${formatHMStext(cumSec)}</span></div>`;
        }
        if(remainder>0.01){
          let rs=(totalSec-cumSec);
          sh+=`<div class="split-row"><span>${(numSplits*splitDist+remainder).toFixed(2)}</span><span>${formatPace(rs/(remainder/splitDist))}</span><span>${formatHMStext(totalSec)}</span></div>`;
        }
        sh+=`</div>`;
        document.getElementById('runSplits').innerHTML=sh;
      } else {
        document.getElementById('runSplits').innerHTML='';
      }
    }

    function clearRun(){
      document.getElementById('runMainResult').textContent='--';
      document.getElementById('runSubResult').textContent='';
      document.getElementById('runVdot').innerHTML='';
      document.getElementById('runDetails').innerHTML='';
      document.getElementById('runPredictions').innerHTML='';
      document.getElementById('runZones').innerHTML='';
      document.getElementById('runSplits').innerHTML='';
    }

    /* NUTRITION — based on ACSM/ISSN guidelines for recreational athletes */
    function calculateNutrition(){
      const w=parseFloat(document.getElementById('nutWeight').value)||70,h=parseFloat(document.getElementById('nutH').value)||0,m=parseFloat(document.getElementById('nutM').value)||0,dur=h+m/60,int=document.getElementById('nutIntense').value,temp=document.getElementById('nutTemp').value;
      if(dur<=0)return;
      let cph;if(dur<1)cph=0;else if(dur<2)cph=30;else if(dur<3)cph=40;else if(dur<5)cph=50;else cph=60;
      if(int==='high')cph+=10;else if(int==='low')cph-=5;
      cph=Math.max(0,Math.min(90,cph));const tc=Math.round(cph*Math.max(0,dur-0.5));
      let fph=500;if(w>80)fph+=50;else if(w<55)fph-=50;if(temp==='hot')fph+=200;else if(temp==='cool')fph-=100;if(int==='high')fph+=100;fph=Math.max(300,Math.min(800,fph));const tf=Math.round(fph*dur);
      let sph=400;if(temp==='hot')sph=600;else if(temp==='cool')sph=300;if(int==='high')sph+=100;sph=Math.min(700,sph);const ts=Math.round(sph*dur);
      const caf=Math.round(w*3),showCaf=dur>=2;

      document.getElementById('nutCards').innerHTML=`<div class="nut-card"><div class="nut-card-icon">🍯</div><div class="nut-card-value">${cph}<span style="font-size:14px;color:var(--text-gray)"> г/ч</span></div><div class="nut-card-label">Углеводы</div><div class="nut-card-sub">${dur<1?'Достаточно воды':'Всего: '+tc+' г'}</div></div><div class="nut-card"><div class="nut-card-icon">💧</div><div class="nut-card-value">${fph}<span style="font-size:14px;color:var(--text-gray)"> мл/ч</span></div><div class="nut-card-label">Жидкость</div><div class="nut-card-sub">Всего: ${(tf/1000).toFixed(1)} л</div></div><div class="nut-card"><div class="nut-card-icon">🧂</div><div class="nut-card-value">${sph}<span style="font-size:14px;color:var(--text-gray)"> мг/ч</span></div><div class="nut-card-label">Натрий</div><div class="nut-card-sub">Всего: ${(ts/1000).toFixed(1)} г</div></div>${showCaf?`<div class="nut-card"><div class="nut-card-icon">☕</div><div class="nut-card-value">${caf}<span style="font-size:14px;color:var(--text-gray)"> мг</span></div><div class="nut-card-label">Кофеин</div><div class="nut-card-sub">За 30-60 мин до финиша</div></div>`:`<div class="nut-card"><div class="nut-card-icon">⚡</div><div class="nut-card-value">—</div><div class="nut-card-label">Кофеин</div><div class="nut-card-sub">Не обязателен (&lt;2ч)</div></div>`}`;

      const gels=Math.max(0,Math.ceil(tc/25)),iso=(tf/1000).toFixed(1),bars=dur>4?Math.floor((dur-2)/1.5):0,ban=dur>3?Math.ceil((dur-3)*0.4):0,salt=Math.ceil(ts/250);
      let pr='<div class="nut-prod-title">РЕКОМЕНДАЦИИ ПО ПРОДУКТАМ</div>';
      if(dur<1){pr+=`<div class="nut-prod-row"><span class="nut-prod-name"><i class="ph ph-drop"></i> Вода</span><span class="nut-prod-qty">${(tf/1000).toFixed(1)} л</span></div>`;pr+=`<div class="nut-prod-row"><span class="nut-prod-name"><i class="ph ph-info"></i> Питание не требуется</span><span class="nut-prod-qty">—</span></div>`}
      else{pr+=`<div class="nut-prod-row"><span class="nut-prod-name"><i class="ph ph-drop"></i> Энергетический гель (~25г)</span><span class="nut-prod-qty">${gels} шт</span></div>`;
      pr+=`<div class="nut-prod-row"><span class="nut-prod-name"><i class="ph ph-flask"></i> Изотоник (30-60г/л)</span><span class="nut-prod-qty">${iso} л</span></div>`;
      if(bars>0)pr+=`<div class="nut-prod-row"><span class="nut-prod-name"><i class="ph ph-cookie"></i> Энергетический батончик</span><span class="nut-prod-qty">${bars} шт</span></div>`;
      if(ban>0)pr+=`<div class="nut-prod-row"><span class="nut-prod-name"><i class="ph ph-leaf"></i> Банан (~30г углеводов)</span><span class="nut-prod-qty">${ban} шт</span></div>`;
      pr+=`<div class="nut-prod-row"><span class="nut-prod-name"><i class="ph ph-pill"></i> Солевые таблетки (~250мг)</span><span class="nut-prod-qty">${salt} шт</span></div>`;
      if(showCaf)pr+=`<div class="nut-prod-row"><span class="nut-prod-name"><i class="ph ph-coffee"></i> Кофеиновый гель</span><span class="nut-prod-qty">1 шт</span></div>`}
      document.getElementById('nutProducts').innerHTML=pr;

      if(dur>=1.5){const tm=Math.round(dur*60);let tl='<div class="nut-tl-title">ТАЙМЛАЙН ПИТАНИЯ</div>';
        tl+=`<div class="nut-tl-item"><span class="nut-tl-time">-60 мин</span><span class="nut-tl-desc">Лёгкий завтрак/перекус: овсянка, банан, тост с мёдом</span></div>`;
        tl+=`<div class="nut-tl-item"><span class="nut-tl-time">Старт</span><span class="nut-tl-desc">Пить по 150-200мл каждые 15-20 мин (не ждать жажды)</span></div>`;
        tl+=`<div class="nut-tl-item"><span class="nut-tl-time">30-45 мин</span><span class="nut-tl-desc">Первый гель или порция изотоника</span></div>`;
        if(dur>=3)tl+=`<div class="nut-tl-item"><span class="nut-tl-time">Каждые 40-45 мин</span><span class="nut-tl-desc">Гель или 200мл изотоника + солевая таблетка каждый час</span></div>`;
        else tl+=`<div class="nut-tl-item"><span class="nut-tl-time">Каждые 40-45 мин</span><span class="nut-tl-desc">Гель или порция изотоника</span></div>`;
        if(dur>4)tl+=`<div class="nut-tl-item"><span class="nut-tl-time">Каждые 90 мин</span><span class="nut-tl-desc">Твёрдая пища: батончик или банан (чередовать с гелями)</span></div>`;
        if(showCaf){const ct=Math.max(tm-45,Math.round(tm*0.75));tl+=`<div class="nut-tl-item"><span class="nut-tl-time">~${ct} мин</span><span class="nut-tl-desc">Кофеиновый гель (${caf} мг) за 30-45 мин до финиша</span></div>`}
        tl+=`<div class="nut-tl-item"><span class="nut-tl-time">Финиш</span><span class="nut-tl-desc">В течение 30 мин: 20-30г белка + 50-80г углеводов</span></div>`;
        document.getElementById('nutTimeline').innerHTML=tl}else{document.getElementById('nutTimeline').innerHTML=''}
    }

    document.addEventListener('input',e=>{if(e.target.matches('.calc-input,.calc-select')){if(document.getElementById('calc-tri').classList.contains('active'))calculateTriTime();if(document.getElementById('calc-run').classList.contains('active'))calculateRun();if(document.getElementById('calc-nutrition').classList.contains('active'))calculateNutrition()}});
    window.addEventListener('DOMContentLoaded',()=>{calculateTriTime()});
    const toTopBtn=document.getElementById('toTopBtn');window.addEventListener('scroll',()=>{if(toTopBtn)toTopBtn.classList.toggle('show',window.scrollY>300)},{passive:true});
  </script>
</body>
</html>
