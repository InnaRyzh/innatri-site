<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Triathlon & Running Calculator Online | InnaTri</title>
  <meta name="description" id="meta-description" content="Online triathlon and running calculator: estimate finish time, pace, and nutrition plan. Race result predictions and hydration recommendations.">
  <meta name="keywords" content="running coach, triathlon calculator, running calculator, pace calculator, triathlon race prediction, Ironman calculator, triathlon nutrition plan">
  <meta name="author" content="Inna Ryzhikh">
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
  <meta name="googlebot" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">

  <meta property="og:title" id="meta-og-title" content="Triathlon & Running Calculator Online | InnaTri">
  <meta property="og:description" id="meta-og-description" content="Online triathlon and running calculator: estimate finish time, pace, and nutrition plan. Race result predictions.">
  <meta property="og:image" id="meta-og-image" content="https://innatri.com/assets/hero/og-image.png">
  <meta property="og:url" id="meta-og-url" content="https://innatri.com/en/calculator.html">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="InnaTri">
  <meta property="og:locale" content="en_US">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" id="meta-twitter-title" content="Triathlon & Running Calculator Online | InnaTri">
  <meta name="twitter:description" id="meta-twitter-description" content="Online triathlon and running calculator: estimate finish time, pace, and nutrition plan.">
  <meta name="twitter:image" id="meta-twitter-image" content="https://innatri.com/assets/hero/og-image.png">

  <link rel="canonical" href="https://innatri.com/en/calculator.html">
  <link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="96x96">
  <link rel="icon" href="../assets/favicon.png?v=3" type="image/png" sizes="96x96">
  <link rel="alternate" hreflang="ru" href="https://innatri.com/calculator.html">
  <link rel="alternate" hreflang="en" href="https://innatri.com/en/calculator.html">
  <link rel="alternate" hreflang="x-default" href="https://innatri.com/calculator.html">

  <!-- FONTS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Manrope:wght@300;400;500;600&family=Unbounded:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- ICONS -->
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <script type="application/ld+json" id="schema-site">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "InnaTri",
      "url": "https://innatri.com",
      "description": "Online triathlon and running coaching. Personalized training plans, analytics, support, and race preparation.",
      "inLanguage": "en-US",
      "publisher": {
        "@type": "Person",
        "name": "Inna Ryzhikh"
      }
    }
  </script>
  <script type="application/ld+json" id="schema-org">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "InnaTri",
    "url": "https://innatri.com/",
    "logo": "https://innatri.com/assets/hero/Image_202601201654.jpeg",
    "founder": {
      "@type": "Person",
      "name": "Inna Ryzhikh"
    },
    "sameAs": [
      "https://t.me/InnaRH",
      "https://www.instagram.com/inna.tri",
      "https://www.youtube.com/@innatri"
    ]
  }
  </script>
  <script type="application/ld+json" id="schema-article">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Triathlon & Running Calculator Online | InnaTri",
      "description": "Online triathlon and running calculator: estimate finish time, pace, and nutrition plan. Race result predictions.",
      "url": "https://innatri.com/en/calculator.html",
      "inLanguage": "en-US"
    }
  </script>
  <script type="application/ld+json" id="schema-calculator">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Triathlon & Running Calculator Online",
      "url": "https://innatri.com/en/calculator.html",
      "applicationCategory": "SportsApplication",
      "operatingSystem": "All",
      "description": "Calculator for triathlon finish time, running pace, and nutrition planning. Helps estimate race results and pace across distances."
    }
  </script>
  <script type="application/ld+json" id="schema-faq">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "How does the triathlon calculator work?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "You select a distance and enter your swimming pace, cycling speed, running pace, and transition times. The calculator shows a predicted total finish time."
          }
        },
        {
          "@type": "Question",
          "name": "Can I calculate running pace from my time?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes, in the RUNNING section you can enter a distance and time to get your pace and predictions for other distances."
          }
        },
        {
          "@type": "Question",
          "name": "What does the NUTRITION section show?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The calculator provides recommended carbohydrate and fluid intake based on race duration and intensity."
          }
        }
      ]
    }
  </script>

  <style>
    :root {
      --primary: #FF3B30;
      --primary-glow: rgba(255, 59, 48, 0.5);
      --bg-main: #080808;
      --bg-card: rgba(255, 255, 255, 0.03);
      --border-color: rgba(255, 255, 255, 0.08);
      --text-white: #FFFFFF;
      --text-gray: #9CA3AF;
      --container-width: 1240px;
      --radius-card: 24px;
      --radius-pill: 100px;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", "Segoe UI", "Helvetica Neue", Arial, sans-serif;
      background-color: var(--bg-main);
      color: var(--text-white);
      line-height: 1.75;
      font-size: 18px;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
      background-image:
        radial-gradient(1200px 600px at 50% -10%, rgba(255, 59, 48, 0.20) 0%, rgba(8,8,8,0) 60%),
        radial-gradient(900px 500px at 15% 35%, rgba(255, 59, 48, 0.10) 0%, rgba(8,8,8,0) 55%),
        radial-gradient(1200px 700px at 85% 70%, rgba(255, 59, 48, 0.08) 0%, rgba(8,8,8,0) 60%),
        linear-gradient(135deg, rgba(255,59,48,0.06) 0%, rgba(8,8,8,0) 45%),
        repeating-linear-gradient(120deg, rgba(255,59,48,0.03) 0 1px, rgba(8,8,8,0) 1px 12px);
      background-attachment: fixed;
      min-height: 100vh;
      overflow-x: hidden;
    }

    body::before {
      content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      pointer-events: none; z-index: -1; opacity: 0.04;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    }

    .tech-font { font-family: 'JetBrains Mono', monospace; letter-spacing: -0.02em; font-size: 12px; opacity: 0.7; text-transform: uppercase; }
    .title-font { font-family: 'Unbounded', sans-serif; text-transform: uppercase; letter-spacing: -0.02em; }

    a { text-decoration: none; color: inherit; transition: 0.3s; cursor: pointer; }
    ul { list-style: none; }
    button { border: none; outline: none; cursor: pointer; }

    .container { max-width: var(--container-width); margin: 0 auto; padding: 0 24px; }
    .section { padding: 120px 0; }

    .header {
      position: fixed; top: 24px; left: 0; right: 0; z-index: 100;
      display: flex; justify-content: center; pointer-events: none;
    }
    .header-island {
      pointer-events: auto;
      background: rgba(10, 10, 10, 0.6); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
      border: 1px solid rgba(255,255,255,0.08); border-radius: var(--radius-pill);
      padding: 10px 32px; display: flex; align-items: center; gap: 48px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.4);
    }
    .logo { font-size: 18px; font-weight: 700; display: flex; align-items: center; gap: 8px; font-family: 'Unbounded'; cursor: pointer; }
    .logo span { color: var(--primary); }
    .nav-desk { display: flex; gap: 32px; font-family: 'Unbounded'; }
    .nav-link { font-size: 13px; font-weight: 600; color: var(--text-gray); position: relative; cursor: pointer; font-family: 'Unbounded'; }
    .nav-link:hover { color: white; }
    .nav-link.active { color: white; }
    .nav-link.active::after {
      content: ''; position: absolute; bottom: -6px; left: 50%; transform: translateX(-50%);
      width: 4px; height: 4px; background: var(--primary); border-radius: 50%;
    }
    .burger { display: none; font-size: 28px; color: white; pointer-events: auto; cursor: pointer; font-family: 'Unbounded'; }
    .lang-switch { font-family: 'JetBrains Mono'; font-size: 12px; color: var(--text-gray); border: 1px solid var(--border-color); padding: 4px 10px; border-radius: 4px; text-transform: uppercase; }

    .mobile-menu { position: fixed; inset: 0; background: #080808; z-index: 999; display: flex; flex-direction: column; justify-content: center; padding: 40px; opacity: 0; pointer-events: none; transition: 0.3s; }
    .mobile-menu.active { opacity: 1; pointer-events: all; }
    .mobile-link { font-family: 'Unbounded'; font-size: 32px; color: white; margin-bottom: 32px; display: block; font-weight: 700; }
    .close-menu { position: absolute; top: 32px; right: 32px; font-size: 32px; color: white; padding: 10px; }

    .btn {
      display: inline-flex; justify-content: center; align-items: center;
      background: var(--text-white); color: #000;
      height: 56px; padding: 0 40px; border-radius: var(--radius-pill);
      font-size: 14px; font-weight: 700; transition: 0.3s cubic-bezier(0.25, 1, 0.5, 1);
    }
    .btn:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(255,255,255,0.15); }

    .calc-container { padding: 48px; background: var(--bg-card); border-radius: var(--radius-card); border: 1px solid var(--border-color); backdrop-filter: blur(10px); }
    .calc-wrapper { display: block; }
    .calc-two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 60px; align-items: start; }
    .calc-tabs { display: flex; gap: 24px; margin-bottom: 32px; border-bottom: 1px solid var(--border-color); padding-bottom: 16px; }
    .calc-tab { background: transparent; color: var(--text-gray); font-family: 'Unbounded'; font-size: 14px; cursor: pointer; padding: 5px 0; transition: 0.3s; position: relative; }
    .calc-tab.active { color: var(--primary); }
    .calc-tab.active::after { content: ''; position: absolute; bottom: -17px; left: 0; width: 100%; height: 2px; background: var(--primary); }
    .calc-mode { display: none; }
    .calc-mode.active { display: block; animation: fadeIn 0.4s ease; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .calc-input-group { margin-bottom: 24px; }
    .calc-label { display: block; font-family: 'JetBrains Mono'; font-size: 11px; color: var(--text-gray); margin-bottom: 8px; letter-spacing: 0.05em; }
    .calc-select, .calc-input { width: 100%; background: rgba(255,255,255,0.03); border: 1px solid var(--border-color); color: white; padding: 16px; border-radius: 12px; font-family: 'Manrope'; font-size: 16px; outline: none; transition: 0.3s; }
    .calc-select:focus, .calc-input:focus { border-color: var(--primary); background: rgba(255,59,48,0.02); }
    .calc-inputs div { display: flex; gap: 16px; }
    .calc-result-box { background: rgba(0,0,0,0.2); border-radius: 16px; padding: 28px; border: 1px solid var(--border-color); }
    .calc-res-title { font-family: 'Unbounded'; font-size: 14px; color: var(--text-gray); margin-bottom: 24px; display: flex; justify-content: space-between; align-items: center; }
    .calc-main-res { font-family: 'Unbounded'; font-size: 40px; color: var(--primary); line-height: 1; margin-bottom: 8px; letter-spacing: -0.02em; }
    .calc-sub-res { font-size: 14px; color: var(--text-gray); margin-bottom: 24px; }
    .calc-details { border-top: 1px solid var(--border-color); padding-top: 24px; display: grid; gap: 16px; }
    .calc-detail-row { display: flex; justify-content: space-between; font-size: 14px; }
    .calc-display-num { font-size: 1.2em; font-weight: 600; color: #fff; margin-right: 2px; }
    .calc-display-unit { font-size: 0.7em; color: var(--text-gray); margin-right: 6px; text-transform: lowercase; }
    .tri-row-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    .calc-time-inputs { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; }

    .footer { padding: 80px 0 40px; border-top: 1px solid var(--border-color); text-align: center; }

    .to-top-btn {
      position: fixed;
      right: 24px;
      bottom: 24px;
      width: 46px;
      height: 46px;
      border-radius: 50%;
      background: rgba(10, 10, 10, 0.7);
      border: 1px solid rgba(255,255,255,0.15);
      color: #fff;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      opacity: 0;
      pointer-events: none;
      transition: 0.25s;
      z-index: 999;
      backdrop-filter: blur(8px);
    }
    .to-top-btn.show { opacity: 1; pointer-events: auto; }

    @media (max-width: 1024px) {
      .header-island { width: 100%; margin: 0 16px; padding: 12px 24px; justify-content: space-between; }
      .nav-desk { display: none; }
      .burger { display: block; }
      .calc-two-col { grid-template-columns: 1fr; gap: 24px; }
      .calc-inputs div { flex-direction: column; }
      .tri-row-2, .calc-time-inputs { grid-template-columns: 1fr 1fr; gap: 10px; }
      .calc-container { padding: 24px; }
      .section { padding: 88px 0; }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-island">
      <a href="index.html" class="logo">INNA<span>TRI</span></a>
      <nav class="nav-desk">
        <a href="index.html" class="nav-link">HOME</a>
        <a href="run.html" class="nav-link">RUNNING</a>
        <a href="blog.html" class="nav-link">BLOG</a>
        <a href="reviews.html" class="nav-link">REVIEWS</a>
        <a href="calculator.html" class="nav-link active">CALCULATOR</a>
        <a href="pricing.html" class="nav-link">PRICING</a>
        <a href="contact.html" class="nav-link">CONTACT</a>
      </nav>
      <a href="../calculator.html" class="lang-switch" title="Русская версия">RU</a>
      <div class="burger" onclick="toggleMenu()"><i class="ph ph-list"></i></div>
    </div>
  </header>

  <div class="mobile-menu" id="mobileMenu">
    <div class="close-menu" onclick="toggleMenu()"><i class="ph ph-x"></i></div>
    <a href="index.html" class="mobile-link" onclick="toggleMenu()">HOME</a>
    <a href="run.html" class="mobile-link" onclick="toggleMenu()">RUNNING</a>
    <a href="blog.html" class="mobile-link" onclick="toggleMenu()">BLOG</a>
    <a href="reviews.html" class="mobile-link" onclick="toggleMenu()">REVIEWS</a>
    <a href="calculator.html" class="mobile-link" onclick="toggleMenu()">CALCULATOR</a>
    <a href="pricing.html" class="mobile-link" onclick="toggleMenu()">PRICING</a>
    <a href="contact.html" class="mobile-link" onclick="toggleMenu()">CONTACT</a>
  </div>

  <section id="calculator" class="section" aria-label="Triathlon and running calculator">
    <div class="container">
      <h1 class="title-font" style="text-align: center; margin-bottom: 16px;">TRIATHLON & RUNNING CALCULATOR</h1>
      <p style="text-align: center; max-width: 760px; margin: 0 auto 36px; color: #C9CFD8;">
        Online calculator for estimating triathlon finish time, running pace, and nutrition plan.
        Enter your data to get a race result prediction, pace per distance, and nutrition recommendations.
      </p>
      <div class="calc-container">
        <div class="calc-tabs">
          <button class="calc-tab active" onclick="switchCalcMode('tri', event)">TRIATHLON</button>
          <button class="calc-tab" onclick="switchCalcMode('run', event)">RUNNING</button>
          <button class="calc-tab" onclick="switchCalcMode('nutrition', event)">NUTRITION</button>
        </div>
        <div class="calc-wrapper">
          <div id="calc-tri" class="calc-mode active">
            <select id="triDist" class="calc-select">
              <option value="sprint">Sprint (0.75 / 20 / 5)</option>
              <option value="olympic">Olympic (1.5 / 40 / 10)</option>
              <option value="half">Ironman 70.3 (1.9 / 90 / 21.1)</option>
              <option value="full">Ironman 140.6 (3.8 / 180 / 42.2)</option>
            </select>
            <div class="calc-two-col">
              <div class="tri-inputs">
                <div class="calc-input-group">
                  <label class="calc-label">Swimming (pace min/100m)</label>
                  <div class="tri-row-2">
                    <input type="number" id="triSwimM" class="calc-input" placeholder="Min" value="2" min="0" step="1" inputmode="numeric" pattern="[0-9]*">
                    <input type="number" id="triSwimS" class="calc-input" placeholder="Sec" value="00" min="0" max="59" step="1" inputmode="numeric" pattern="[0-9]*">
                  </div>
                </div>
                <div class="calc-input-group">
                  <label class="calc-label">Cycling (speed km/h)</label>
                  <input type="number" id="triBikeSpeed" class="calc-input" placeholder="km/h" value="30" min="0" step="0.1" inputmode="decimal">
                </div>
                <div class="calc-input-group">
                  <label class="calc-label">Running (pace min/km)</label>
                  <div class="tri-row-2">
                    <input type="number" id="triRunM" class="calc-input" placeholder="Min" value="5" min="0" step="1" inputmode="numeric" pattern="[0-9]*">
                    <input type="number" id="triRunS" class="calc-input" placeholder="Sec" value="30" min="0" max="59" step="1" inputmode="numeric" pattern="[0-9]*">
                  </div>
                </div>
                <div class="calc-input-group">
                  <label class="calc-label">Transitions (T1 + T2, min)</label>
                  <input type="number" id="triT1T2" class="calc-input" placeholder="Total time" value="5" min="0" step="1" inputmode="numeric" pattern="[0-9]*">
                </div>
              </div>
              <div class="calc-result-box">
                <div class="calc-res-title">TOTAL TIME WITH TRANSITIONS</div>
                <div class="calc-main-res" id="triTotalResult">--</div>
                <div class="calc-sub-res" id="triSubResult"></div>
                <div class="calc-details" id="triDetails"></div>
              </div>
            </div>
          </div>

          <div id="calc-run" class="calc-mode">
            <div class="calc-input-group">
              <label class="calc-label">Distance</label>
              <select id="runDistInput" class="calc-select">
                <option value="5">5 km</option>
                <option value="10">10 km</option>
                <option value="21.1">Half Marathon</option>
                <option value="42.2">Marathon</option>
              </select>
            </div>
            <div class="calc-input-group">
              <label class="calc-label">Your Time</label>
              <div class="calc-time-inputs">
                <input type="number" id="runH" class="calc-input" placeholder="Hr" min="0" step="1" inputmode="numeric" pattern="[0-9]*">
                <input type="number" id="runM" class="calc-input" placeholder="Min" value="50" min="0" step="1" inputmode="numeric" pattern="[0-9]*">
                <input type="number" id="runS" class="calc-input" placeholder="Sec" value="00" min="0" max="59" step="1" inputmode="numeric" pattern="[0-9]*">
              </div>
            </div>
            <div class="calc-result-box">
              <div class="calc-res-title">YOUR PACE</div>
              <div class="calc-main-res" id="runPaceResult">--</div>
              <div class="calc-details" id="runPredictions"></div>
            </div>
          </div>

          <div id="calc-nutrition" class="calc-mode">
            <div class="calc-input-group">
              <label class="calc-label">Race Duration</label>
              <div class="calc-time-inputs" style="grid-template-columns: 1fr 1fr;">
                <input type="number" id="nutH" class="calc-input" placeholder="Hours" value="4" min="0" step="1" inputmode="numeric" pattern="[0-9]*">
                <input type="number" id="nutM" class="calc-input" placeholder="Min" value="0" min="0" step="1" inputmode="numeric" pattern="[0-9]*">
              </div>
            </div>
            <div class="calc-input-group">
              <label class="calc-label">Intensity</label>
              <select id="nutIntense" class="calc-select">
                <option value="low">Easy (Z1-Z2)</option>
                <option value="med" selected>Race pace (Z3)</option>
                <option value="high">High (Z4-Z5)</option>
              </select>
            </div>
            <div class="calc-result-box">
              <div class="calc-res-title">NUTRITION & HYDRATION PLAN</div>
              <div class="calc-main-res" id="nutCarbs">--</div>
              <div class="calc-sub-res">CARBS PER HOUR</div>
              <div class="calc-details" id="nutDetails"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="footer">
    <div class="container">
      <h2 class="title-font" style="font-size: 24px; margin-bottom: 30px;">READY TO BECOME AN IRONMAN?</h2>
      <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
        <a href="https://t.me/InnaRH" class="btn" style="background: transparent; border: 1px solid #333; color: white; display: inline-flex; align-items: center; gap: 8px;"><i class="fa-brands fa-telegram"></i> TELEGRAM</a>
        <a href="https://www.instagram.com/inna.tri" class="btn" style="background: transparent; border: 1px solid #333; color: white; display: inline-flex; align-items: center; gap: 8px;"><i class="fa-brands fa-instagram"></i> INSTAGRAM</a>
        <a href="https://www.youtube.com/@innatri" class="btn" style="background: transparent; border: 1px solid #333; color: white; display: inline-flex; align-items: center; gap: 8px;"><i class="fa-brands fa-youtube"></i> YOUTUBE</a>
      </div>
      <p class="tech-font" style="margin-top: 40px;">© 2026 INNATRI. SYSTEMATIC COACHING.</p>
    </div>
  </footer>

  <button class="to-top-btn" id="toTopBtn" onclick="window.scrollTo({ top: 0, behavior: 'smooth' })" aria-label="Back to top">
    <i class="ph ph-arrow-up"></i>
  </button>

  <script>
    function toggleMenu() {
      const menu = document.getElementById('mobileMenu');
      menu.classList.toggle('active');
      document.body.style.overflow = menu.classList.contains('active') ? 'hidden' : 'auto';
    }

    function switchCalcMode(mode, e) {
      document.querySelectorAll('.calc-mode').forEach(el => el.classList.remove('active'));
      document.querySelectorAll('.calc-tab').forEach(el => el.classList.remove('active'));
      document.getElementById('calc-' + mode).classList.add('active');
      if (e && e.target) { e.target.classList.add('active'); }
    }

    function formatHMS(totalSeconds) {
      if (!isFinite(totalSeconds)) return '--';
      const secs = Math.max(0, Math.round(totalSeconds));
      const h = Math.floor(secs / 3600);
      const m = Math.floor((secs % 3600) / 60);
      const s = secs % 60;
      if (h > 0) return `<span class="calc-display-num">${h}</span><span class="calc-display-unit">h</span> <span class="calc-display-num">${m}</span><span class="calc-display-unit">min</span>`;
      if (m > 0 && s > 0) return `<span class="calc-display-num">${m}</span><span class="calc-display-unit">min</span> <span class="calc-display-num">${s}</span><span class="calc-display-unit">sec</span>`;
      if (m > 0) return `<span class="calc-display-num">${m}</span><span class="calc-display-unit">min</span>`;
      return `<span class="calc-display-num">${s}</span><span class="calc-display-unit">sec</span>`;
    }

    function formatPace(secondsPerKm) {
      if (!isFinite(secondsPerKm) || secondsPerKm <= 0) return '--';
      const mins = Math.floor(secondsPerKm / 60);
      const secs = Math.round(secondsPerKm % 60);
      return `${mins}:${String(secs).padStart(2, '0')}`;
    }

    function calculateTriTime() {
      const distMap = {
        sprint: { swim: 0.75, bike: 20, run: 5 },
        olympic: { swim: 1.5, bike: 40, run: 10 },
        half: { swim: 1.9, bike: 90, run: 21.1 },
        full: { swim: 3.8, bike: 180, run: 42.2 }
      };
      const distKey = document.getElementById('triDist').value;
      const dists = distMap[distKey];

      const swimM = parseFloat(document.getElementById('triSwimM').value) || 0;
      const swimS = parseFloat(document.getElementById('triSwimS').value) || 0;
      const swimPaceSec = swimM * 60 + swimS;
      const swimTimeSec = swimPaceSec * (dists.swim * 10);

      const bikeSpeed = parseFloat(document.getElementById('triBikeSpeed').value) || 30;
      const bikeTimeSec = bikeSpeed > 0 ? (dists.bike / bikeSpeed) * 3600 : 0;

      const runM = parseFloat(document.getElementById('triRunM').value) || 0;
      const runS = parseFloat(document.getElementById('triRunS').value) || 0;
      const runPaceSec = runM * 60 + runS;
      const runTimeSec = runPaceSec * dists.run;

      const t1t2Min = parseFloat(document.getElementById('triT1T2').value) || 0;
      const t1t2Sec = t1t2Min * 60;

      const totalSec = swimTimeSec + bikeTimeSec + runTimeSec + t1t2Sec;
      document.getElementById('triTotalResult').innerHTML = formatHMS(totalSec);

      document.getElementById('triDetails').innerHTML = `
        <div class="calc-detail-row"><span>Swim (${dists.swim} km)</span> <span>${formatHMS(swimTimeSec)}</span></div>
        <div class="calc-detail-row"><span>Bike (${dists.bike} km)</span> <span>${formatHMS(bikeTimeSec)}</span></div>
        <div class="calc-detail-row"><span>Run (${dists.run} km)</span> <span>${formatHMS(runTimeSec)}</span></div>
        <div class="calc-detail-row"><span>Transition</span> <span>${formatHMS(t1t2Sec)}</span></div>
      `;
    }

    function calculateRunTime() {
      const dist = parseFloat(document.getElementById('runDistInput').value) || 10;
      const h = parseFloat(document.getElementById('runH').value) || 0;
      const m = parseFloat(document.getElementById('runM').value) || 0;
      const s = parseFloat(document.getElementById('runS').value) || 0;

      const totalSeconds = h * 3600 + m * 60 + s;
      if (totalSeconds <= 0) return;

      const paceSec = totalSeconds / dist;
      document.getElementById('runPaceResult').textContent = formatPace(paceSec) + ' /km';

      const predictions = [
        { d: 5, label: '5 km' },
        { d: 10, label: '10 km' },
        { d: 21.1, label: 'Half Marathon' },
        { d: 42.2, label: 'Marathon' }
      ];

      let html = '';
      predictions.forEach(p => {
        const predSec = totalSeconds * Math.pow((p.d / dist), 1.06);
        html += `<div class="calc-detail-row"><span>${p.label}</span> <span>${formatHMS(predSec)}</span></div>`;
      });
      document.getElementById('runPredictions').innerHTML = html;
    }

    function calculateNutrition() {
      const h = parseFloat(document.getElementById('nutH').value) || 0;
      const m = parseFloat(document.getElementById('nutM').value) || 0;
      const durationHrs = h + m / 60;
      const intensity = document.getElementById('nutIntense').value;

      let carbsPerHour = 60;
      if (durationHrs < 1.5) carbsPerHour = 30;
      else if (durationHrs > 3) carbsPerHour = 90;

      if (intensity === 'low') carbsPerHour -= 10;
      if (intensity === 'high') carbsPerHour += 10;

      if (durationHrs < 1.0) carbsPerHour = 10;
      else if (durationHrs < 2.5) carbsPerHour = 45;
      else carbsPerHour = 70;

      if (intensity === 'high' && durationHrs > 1.5) carbsPerHour += 10;

      const fluidPerHour = 0.5 + (intensity === 'high' ? 0.3 : 0);

      document.getElementById('nutCarbs').textContent = carbsPerHour + 'g';

      const totalCarbs = Math.round(carbsPerHour * durationHrs);
      const totalFluid = (fluidPerHour * durationHrs).toFixed(1);

      document.getElementById('nutDetails').innerHTML = `
        <div class="calc-detail-row"><span>Total Carbs</span> <span>${totalCarbs} g</span></div>
        <div class="calc-detail-row"><span>Fluid (total)</span> <span>~${totalFluid} L</span></div>
        <div class="calc-detail-row"><span>Salt/Electrolytes</span> <span>Essential</span></div>
      `;
    }

    document.querySelectorAll('.calc-input, .calc-select').forEach(el => {
      el.addEventListener('input', () => {
        if(document.getElementById('calc-tri').classList.contains('active')) calculateTriTime();
        if(document.getElementById('calc-run').classList.contains('active')) calculateRunTime();
        if(document.getElementById('calc-nutrition').classList.contains('active')) calculateNutrition();
      });
    });

    window.addEventListener('DOMContentLoaded', function() {
      calculateTriTime();
    });

    const toTopBtn = document.getElementById('toTopBtn');
    function updateToTop() {
      if (!toTopBtn) return;
      const shouldShow = window.scrollY > 300;
      toTopBtn.classList.toggle('show', shouldShow);
    }
    window.addEventListener('scroll', updateToTop, { passive: true });
    updateToTop();
  </script>
</body>
</html>
